# -*- coding: utf-8 -*-
"""D2_Currents.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1MHhC6wUP7X7uZT0JLux9NeHwVb6rkkO1
"""

from google.colab import drive
drive.mount("/content/gdrive")

# Commented out IPython magic to ensure Python compatibility.
# %cd /content/gdrive/My\ Drive/Currents
!ls

# !apt install proj-bin libproj-dev libgeos-dev

# !pip install https://github.com/matplotlib/basemap/archive/master.zip

# Commented out IPython magic to ensure Python compatibility.
# %matplotlib inline
import numpy as np
from glob import glob
import os
import pickle
import matplotlib
import matplotlib.pyplot as plt
# from mpl_toolkits.basemap import Basemap
from mpl_toolkits.mplot3d import Axes3D
from matplotlib.collections import PolyCollection
import matplotlib.animation as animation
import plotly.graph_objects as go
import plotly

with open('meridional-current_3D.pkl','rb') as Meridonal_pkl:
  Merlongitudes,Merlatitudes,Merdepths,Mervalues = pickle.load(Meridonal_pkl)

with open('zonal-current_3D.pkl','rb') as Zon_pkl:
  Zonlongitudes,Zonlatitudes,Zondepths,Zonvalues = pickle.load(Zon_pkl)

dates = ['"29-DEC-2003"', '"03-JAN-2004"', '"08-JAN-2004"', '"13-JAN-2004"', '"18-JAN-2004"', '"23-JAN-2004"', '"28-JAN-2004"', '"02-FEB-2004"', '"07-FEB-2004"', '"12-FEB-2004"', '"17-FEB-2004"', '"22-FEB-2004"', '"28-FEB-2004"', '"04-MAR-2004"', '"09-MAR-2004"', '"14-MAR-2004"', '"19-MAR-2004"', '"24-MAR-2004"', '"29-MAR-2004"', '"03-APR-2004"', '"08-APR-2004"', '"13-APR-2004"', '"18-APR-2004"', '"23-APR-2004"', '"28-APR-2004"', '"03-MAY-2004"', '"08-MAY-2004"', '"13-MAY-2004"', '"18-MAY-2004"', '"23-MAY-2004"', '"28-MAY-2004"', '"02-JUN-2004"', '"07-JUN-2004"', '"12-JUN-2004"', '"17-JUN-2004"', '"22-JUN-2004"', '"27-JUN-2004"', '"02-JUL-2004"', '"07-JUL-2004"', '"12-JUL-2004"', '"17-JUL-2004"', '"22-JUL-2004"', '"27-JUL-2004"', '"01-AUG-2004"', '"06-AUG-2004"', '"11-AUG-2004"', '"16-AUG-2004"', '"21-AUG-2004"', '"26-AUG-2004"', '"31-AUG-2004"', '"05-SEP-2004"', '"10-SEP-2004"', '"15-SEP-2004"', '"20-SEP-2004"', '"25-SEP-2004"', '"30-SEP-2004"', '"05-OCT-2004"', '"10-OCT-2004"', '"15-OCT-2004"', '"20-OCT-2004"', '"25-OCT-2004"', '"30-OCT-2004"', '"04-NOV-2004"', '"09-NOV-2004"', '"14-NOV-2004"', '"19-NOV-2004"', '"24-NOV-2004"', '"29-NOV-2004"', '"04-DEC-2004"', '"09-DEC-2004"', '"14-DEC-2004"', '"19-DEC-2004"', '"24-DEC-2004"', '"29-DEC-2004"', '"03-JAN-2005"', '"08-JAN-2005"', '"13-JAN-2005"', '"18-JAN-2005"', '"23-JAN-2005"', '"28-JAN-2005"', '"02-FEB-2005"', '"07-FEB-2005"', '"12-FEB-2005"', '"17-FEB-2005"', '"22-FEB-2005"', '"27-FEB-2005"', '"04-MAR-2005"', '"09-MAR-2005"', '"14-MAR-2005"', '"19-MAR-2005"', '"24-MAR-2005"', '"29-MAR-2005"', '"03-APR-2005"', '"08-APR-2005"', '"13-APR-2005"', '"18-APR-2005"', '"23-APR-2005"', '"28-APR-2005"', '"03-MAY-2005"', '"08-MAY-2005"', '"13-MAY-2005"', '"18-MAY-2005"', '"23-MAY-2005"', '"28-MAY-2005"', '"02-JUN-2005"', '"07-JUN-2005"', '"12-JUN-2005"', '"17-JUN-2005"', '"22-JUN-2005"', '"27-JUN-2005"', '"02-JUL-2005"', '"07-JUL-2005"', '"12-JUL-2005"', '"17-JUL-2005"', '"22-JUL-2005"', '"27-JUL-2005"', '"01-AUG-2005"', '"06-AUG-2005"', '"11-AUG-2005"', '"16-AUG-2005"', '"21-AUG-2005"', '"26-AUG-2005"', '"31-AUG-2005"', '"05-SEP-2005"', '"10-SEP-2005"', '"15-SEP-2005"', '"20-SEP-2005"', '"25-SEP-2005"', '"30-SEP-2005"', '"05-OCT-2005"', '"10-OCT-2005"', '"15-OCT-2005"', '"20-OCT-2005"', '"25-OCT-2005"', '"30-OCT-2005"', '"04-NOV-2005"', '"09-NOV-2005"', '"14-NOV-2005"', '"19-NOV-2005"', '"24-NOV-2005"', '"29-NOV-2005"', '"04-DEC-2005"', '"09-DEC-2005"', '"14-DEC-2005"', '"19-DEC-2005"', '"24-DEC-2005"', '"29-DEC-2005"']

# with open('sample_currents.pkl','wb') as sample_pkl:
#   pickle.dump([Merlongitudes[0],Merlatitudes[0],Merdepths[0],Mervalues[0]],sample_pkl)

s = 0
e = 4

s = 0
e = 4
for i in range(147):
  x=Merlongitudes[i]
  y=Merlatitudes[i]
  z=Merdepths[i]
  u = Mervalues[i]
  v = Zonvalues[i]
  u * -1
  v * -1
  w = [0]*len(Mervalues[i])
  Zonlongitudes,Zonlatitudes,Zondepths = [],[],[]
  l = 181*189*s
  k = 181*189*e

  fig = go.Figure(data = go.Cone(
      x=x[l:k],
      y=y[l:k],
      z=z[l:k],
      u=u[l:k],
      v=v[l:k],
      w=w[l:k],
      sizemode="scaled",
      sizeref=2,
      anchor="tip"))

  l = ''
  for x in dates[i][1:-1].split('-'):
    l += x +  ' '

  fig.update_layout(
           title_text="Currents' Visualization as on : "+l, 
           coloraxis=dict(colorscale='BrBG',
                          colorbar_thickness=25,
                          colorbar_len=0.75))
  plotly.offline.plot(fig, filename='Images/'+dates[i]+'.html')
  # fig.show()

fig.show()

i = 86

x=Merlongitudes[i]
y=Merlatitudes[i]
z=Merdepths[i]
u = Mervalues[i]
v = Zonvalues[i]
u * -1
v * -1
w = [0]*len(Mervalues[i])
Zonlongitudes,Zonlatitudes,Zondepths = [],[],[]
l = 181*189*s
k = 181*189*e

fig = go.Figure(data = go.Cone(
    x=x[l:k],
    y=y[l:k],
    z=z[l:k],
    u=u[l:k],
    v=v[l:k],
    w=w[l:k],
    sizemode="scaled",
    sizeref=2,
      anchor="tip"))


fig.update_layout(
           title_text="Currents' Visualization as on : 4 March 2005", 
           coloraxis=dict(colorscale='BrBG',
                          colorbar_thickness=25,
                          colorbar_len=0.75))
plotly.offline.plot(fig, filename='Images/'+dates[i]+'.html')
  # fig.show()

fig.show()

